<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản lý khách hàng</title>

    <!-- Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/reset.css}" />
    <link rel="stylesheet" th:href="@{/css/admin.css}" />
    <link rel="stylesheet" th:href="@{/css/manageCustomer.css}" />
  </head>

  <body>
    <div class="content">
      <!-- Left content -->
      <div class="left-content">
        <h1>ADMIN CONTROL</h1>
        <div class="divider"></div>

        <nav class="side-bar">
          <ul>
            <li>
              <a th:href="@{/admin/dashboard}">
                <img th:src="@{/img/Subtract.svg}" /> Tổng quan
              </a>
            </li>

            <li>
              <a th:href="@{/admin/addProduct}">
                <img th:src="@{/img/add-icon.svg}" /> Thêm sản phẩm
              </a>
            </li>

            <li>
              <a th:href="@{/admin/manageProduct}">
                <img th:src="@{/img/manage-product.svg}" /> Quản lý sản phẩm
              </a>
            </li>

            <li>
              <a th:href="@{/admin/manageOrder}">
                <img th:src="@{/img/manage-order.svg}" /> Quản lý đơn hàng
              </a>
            </li>

            <li class="active">
              <a th:href="@{/admin/manageCustomer}">
                <img th:src="@{/img/customer.svg}" /> Khách hàng
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <!-- Right content -->
      <div class="right-content">
        <h1>Quản Lý Khách Hàng</h1>

        <!-- STAT -->
        <div class="stat-box">
          <div class="stat-card blue">
            <div class="stat-number" id="totalUsers">0</div>
            <div class="stat-label">Tổng Người Dùng</div>
          </div>

          <div class="stat-card green">
            <div class="stat-number" id="buyerUsers">0</div>
            <div class="stat-label">Người Mua</div>
          </div>
        </div>

        <!-- SEARCH -->
        <div class="search-bar">
          <input
            type="text"
            id="searchInput"
            placeholder="Tìm Kiếm Tên Khách Hàng ..."
          />
          <button id="btnSearch">Tìm Kiếm</button>
        </div>

        <!-- TABLE -->
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Thông Tin Cá Nhân</th>
                <th>Liên Hệ</th>
                <th>Đơn Hàng</th>
                <th>Ngày Đăng Ký</th>
              </tr>
            </thead>
            <tbody id="customerTable"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- JS demo (giữ nguyên – chưa cần backend) -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const customers = [
          {
            id: 34,
            name: "Nguyễn Văn A",
            email: "NguyenV@gmail.com",
            phone: "0925235821",
            orders: 20,
            date: "1/1/2026",
          },
          {
            id: 35,
            name: "Nguyễn Văn B",
            email: "NguyenB@gmail.com",
            phone: "0925225821",
            orders: 22,
            date: "2/1/2026",
          },
          {
            id: 36,
            name: "Nguyễn Văn C",
            email: "NguyenC@gmail.com",
            phone: "0925235221",
            orders: 10,
            date: "3/1/2026",
          },
          {
            id: 37,
            name: "Nguyễn Văn D",
            email: "NguyenD@gmail.com",
            phone: "0925235825",
            orders: 15,
            date: "4/1/2026",
          },
        ];

        const tableBody = document.getElementById("customerTable");
        const searchInput = document.getElementById("searchInput");

        function renderTable(data) {
          tableBody.innerHTML = "";
          data.forEach((c) => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td>${c.id}</td>
              <td>
                <div class="personal">${c.name}</div>
                <div class="email">${c.email}</div>
              </td>
              <td>${c.phone}</td>
              <td class="order">${c.orders}</td>
              <td>${c.date}</td>
            `;
            tableBody.appendChild(tr);
          });
        }

        function renderStat() {
          document.getElementById("totalUsers").innerText = customers.length;
          document.getElementById("buyerUsers").innerText = customers.filter(
            (c) => c.orders > 0
          ).length;
        }

        document.getElementById("btnSearch").addEventListener("click", () => {
          const keyword = searchInput.value.toLowerCase();
          const result = customers.filter(
            (c) =>
              c.name.toLowerCase().includes(keyword) ||
              c.email.toLowerCase().includes(keyword) ||
              c.phone.includes(keyword)
          );
          renderTable(result);
        });

        renderStat();
        renderTable(customers);
      });
    </script>

    <!-- Sidebar JS -->
    <script th:src="@{/js/sidebar-active.js}"></script>
  </body>
</html>
